#
# THIS FILE IS MANAGED BY PUPPET. CHANGES WILL BE OVERWRITTEN
# You have been warned :)
#

config_version	1.2

snapshot_root	<%= @snapshot_root + @private_dir %>
no_create_root	<%= @no_create_root ? 1 : 0 %>

#################################
# EXTERNAL PROGRAM DEPENDENCIES #
#################################
cmd_rsync	<%= @cmd_rsync %>

<% if @cmd_cp -%>
cmd_cp		<%= @cmd_cp %>
<% end -%>
<% if @cmd_rm -%>
cmd_rm		<%= @cmd_rm %>
<% end -%>
<% if @cmd_ssh -%>
cmd_ssh		<%= @cmd_ssh %>	
<% end -%>
<% if @cmd_du -%>
cmd_du		<%= @cmd_du %>
<% end -%>
<% if @cmd_logger -%>
cmd_logger	<%= @cmd_logger %>
<% end -%>
<% if @cmd_rsnapshot_diff -%>
cmd_rsnapshot_diff	<%= @cmd_rsnapshot_diff %>
<% end -%>

<% if @cmd_preexec -%>
cmd_preexec	<%= @cmd_preexec %>
<% end -%>
<% if @cmd_postexec -%>
cmd_postexec	<%= @cmd_postexec %>
<% end -%>

<% if @use_lvm -%>
linux_lvm_cmd_lvcreate	<%= @linux_lvm_cmd_lvcreate %>
linux_lvm_cmd_lvremove	<%= @linux_lvm_cmd_lvremove %>
linux_lvm_cmd_mount		<%= @linux_lvm_cmd_mount %>
linux_lvm_cmd_umount	<%= @linux_lvm_cmd_umount %>
linux_lvm_snapshotsize	<%= @linux_lvm_snapshotsize %>
linux_lvm_snapshotname	<%= @linux_lvm_snapshotname %>
linux_lvm_vgpath	    <%= @linux_lvm_vgpath %>
linux_lvm_mountpath	    <%= @linux_lvm_mountpath %>

<% end -%>
#########################################
#           BACKUP INTERVALS            #
# Must be unique and in ascending order #
# i.e. hourly, daily, weekly, etc.      #
#########################################
<% if @interval_hourly -%>
retain		hourly	<%= @interval_hourly %>
<% end -%>
<% if @interval_daily -%>
retain		daily	<%= @interval_daily %>
<% end -%>
<% if @interval_weekly -%>
retain		weekly	<%= @interval_weekly %>
<% end -%>
<% if @interval_monthly -%>
retain		monthly	<%= @interval_monthly %>
<% end -%>

############################################
#              GLOBAL OPTIONS              #
############################################
verbose		<%= @console_verbosity %>
loglevel	<%= @log_level%>
logfile	<%= @log_file %>

lockfile	<%= @lockfile %>
stop_on_stale_lockfile			<%= @stop_on_stale_lockfile ? 1 : 0 %>

rsync_short_args	<%= @rsync_short_args %>
rsync_long_args	<%= @rsync_long_args %>
<% if @ssh_args -%>
ssh_args	<%= @ssh_args %>
<% end -%>
du_args	<%= @du_args %>

<% @rsync_include.each do |val| -%>
include <%= val %>
<% end -%>
<% @rsync_exclude.each do |val| -%>
exclude <%= val %>
<% end -%>
<% @rsync_include_file.each do |val| -%>
include_file <%= val %>
<% end -%>
<% @rsync_exclude_file.each do |val| -%>
exclude_file <%= val %>
<% end -%>

one_fs	<%= @one_fs ? 1 : 0 %>
link_dest	<%= @link_dest ? 1 : 0 %>
sync_first	<%= @sync_first ? 1 : 0 %>
use_lazy_deletes	<%= @use_lazy_deletes ? 1 : 0 %>
rsync_numtries	<%= @rsync_numtries %>
